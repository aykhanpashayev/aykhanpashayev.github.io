<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Timeline â€” Aykhan Pashayev</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Semester-by-semester progress with linked artifacts and short demos." />
  <link rel="icon" href="assets/favicon.ico" />
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#0b0b0f; --fg:#e9eef2; --muted:#a8b3be; --accent:#7dd3fc; --card:#151821; --border:#23283a;}
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--fg);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    a{color:var(--accent);text-decoration:none}
    a:focus{outline:2px solid var(--accent);outline-offset:2px}
    header{position:sticky;top:0;background:rgba(11,11,15,.85);backdrop-filter:saturate(120%) blur(8px);border-bottom:1px solid var(--border);z-index:50}
    nav{max-width:1100px;margin:0 auto;padding:1.25rem;display:flex;align-items:center;justify-content:space-between}
    nav .menu a{padding:.5rem .75rem;border-radius:.6rem}
    nav .menu a[aria-current="page"]{background:rgba(125,211,252,.12);color:var(--accent)}
    main{max-width:1100px;margin:0 auto;padding:1.25rem}
    .term{background:var(--card);border:1px solid var(--border);border-radius:1rem;padding:1rem;margin-bottom:1rem}
    h2{font-size:1.1rem;margin:.25rem 0 .5rem}
    .meta{color:var(--muted);font-size:.9rem}
    .artifacts{display:grid;gap:.75rem;grid-template-columns:repeat(2,1fr);margin-top:.75rem}
    @media(max-width:900px){.artifacts{grid-template-columns:1fr}}
    .artifact{border:1px solid var(--border);border-radius:.75rem;padding:.75rem;background:#0f1219}
    video{width:100%;height:auto;border-radius:.5rem;border:1px solid var(--border)}
    img{max-width:100%;height:auto;border-radius:.5rem;border:1px solid var(--border)}
    .badge{display:inline-flex;align-items:center;gap:.4ch;font-size:.75rem;padding:.15rem .5rem;border:1px solid var(--border);border-radius:999px;background:#111214;color:var(--muted)}
    .tag{display:inline-block;padding:.15rem .5rem;border:1px solid var(--border);border-radius:.5rem;font-size:.72rem;color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <nav aria-label="Primary">
      <div class="brand">Aykhan Pashayev</div>
      <div class="menu">
        <a href="index.html">Home</a>
        <a href="projects.html">Projects</a>
        <a href="timeline.html" aria-current="page">Timeline</a>
        <a href="github.html">GitHub</a>
      </div>
    </nav>
  </header>

  <main>
    <h1 style="font-size:1.5rem;margin:.5rem 0 1rem">Timeline</h1>
    <section id="list" aria-live="polite"></section>
  </main>

  <script defer>
    const $ = (s,el=document)=>el.querySelector(s);
    const list = $('#list');

    fetch('assets/data/semesters.json', {cache:'no-store'})
      .then(r=>r.json())
      .then(data=>{
        // The file is newest last; display newest first
        const items = data.slice().reverse();
        items.forEach(term=>{
          const wrap = document.createElement('article');
          wrap.className = 'term';
          wrap.innerHTML = `
            <div style="display:flex;align-items:baseline;justify-content:space-between;gap:.5rem;flex-wrap:wrap">
              <h2>${escapeHtml(term.term)}</h2>
              <span class="meta">${escapeHtml(term.dates||'')}</span>
            </div>
            <p>${escapeHtml(term.summary||'')}</p>
            ${renderCourses(term.courses||[])}
            ${renderHighlights(term.highlights||[])}
            <div class="artifacts">
              ${(term.artifacts||[]).map(a=>renderArtifact(a)).join('')}
            </div>
          `;
          list.appendChild(wrap);
        });
      }).catch(err=>console.error(err));

    function renderCourses(courses){
      if(!courses.length) return '';
      return `<p><span class="badge" title="Courses">Courses</span> ${courses.map(c=>`<span class="tag">${escapeHtml(c)}</span>`).join(' ')}</p>`;
    }
    function renderHighlights(hls){
      if(!hls.length) return '';
      return `<ul>${hls.map(h=>`<li class="meta">${escapeHtml(h)}</li>`).join('')}</ul>`;
    }

    function renderArtifact(a){
      const tags = (a.tags||[]).map(t=>`<span class="tag">${escapeHtml(t)}</span>`).join(' ');
      const desc = `<p class="meta">${escapeHtml(a.desc||'')}</p>`;
      // Video embed for local MP4s (type === "video")
      if(a.type === 'video' && isLocalMp4(a.link)){
        return `
          <figure class="artifact">
            <figcaption><strong>${escapeHtml(a.title)}</strong></figcaption>
            <video controls preload="metadata">
              <source src="${escapeAttr(a.link)}" type="video/mp4">
            </video>
            ${desc}
            <div style="margin-top:.4rem">${tags}</div>
          </figure>
        `;
      }
      // Simple link for PDFs / others
      const icon = iconForType(a.type);
      return `
        <div class="artifact">
          <div style="display:flex;align-items:center;gap:.5rem;flex-wrap:wrap">
            ${icon}
            <a href="${escapeAttr(a.link)}" target="_blank" rel="noopener" class="pill">${escapeHtml(a.title)}</a>
          </div>
          ${desc}
          <div style="margin-top:.4rem">${tags}</div>
        </div>
      `;
    }

    function isLocalMp4(link){
      try{ const u = String(link||''); return u.endsWith('.mp4') && (u.startsWith('assets/') || u.startsWith('./assets/')); }catch{ return false; }
    }
    function iconForType(t){
      const base = `<span class="badge" aria-hidden="true">`;
      if(t==='pdf') return base + 'PDF</span>';
      if(t==='github') return base + 'Repo</span>';
      if(t==='image') return base + 'Image</span>';
      if(t==='doc') return base + 'Doc</span>';
      if(t==='video') return base + 'Video</span>';
      return base + 'Link</span>';
    }
    function escapeHtml(s){return String(s||'').replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));}
    function escapeAttr(s){return String(s||'').replace(/"/g,'&quot;');}
  </script>
</body>
</html>
